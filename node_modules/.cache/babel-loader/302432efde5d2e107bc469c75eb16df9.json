{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/Users/CRN/VSCode-workspace/auteurfilm/jahndoe-app/jahndoesite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/CRN/VSCode-workspace/auteurfilm/jahndoe-app/jahndoesite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/CRN/VSCode-workspace/auteurfilm/jahndoe-app/jahndoesite/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import'./App.css';import Navbar from'./Components/Navbar';import{BrowserRouter as Router,Switch,Route}from'react-router-dom';import Home from'./Components/pages/Home';import About from'./Components/pages/About';import Music from'./Components/pages/Music';import Videos from'./Components/pages/Videos';import Shop from'./Components/pages/Shop';import Cart from'./Components/Cart/Cart';import Footer from'./Components/Footer';import ScrollToTop from'./Components/ScrollToTop';import{commerce}from'./lib/commerce';import Checkout from'./Components/CheckoutForm/Checkout/Checkout';var App=function App(){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),mobileOpen=_React$useState2[0],setMobileOpen=_React$useState2[1];var _useState=useState({}),_useState2=_slicedToArray(_useState,2),order=_useState2[0],setOrder=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),errorMessage=_useState4[0],setErrorMessage=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),products=_useState6[0],setProducts=_useState6[1];var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),cart=_useState8[0],setCart=_useState8[1];var fetchProducts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$commerce$produ,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return commerce.products.list();case 2:_yield$commerce$produ=_context.sent;data=_yield$commerce$produ.data;setProducts(data);case 5:case\"end\":return _context.stop();}}},_callee);}));return function fetchProducts(){return _ref.apply(this,arguments);};}();var fetchCart=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.t0=setCart;_context2.next=3;return commerce.cart.retrieve();case 3:_context2.t1=_context2.sent;(0,_context2.t0)(_context2.t1);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchCart(){return _ref2.apply(this,arguments);};}();var handleUpdateCartQty=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(productId,quantity){var _yield$commerce$cart$,cart;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return commerce.cart.update(productId,{quantity:quantity});case 2:_yield$commerce$cart$=_context3.sent;cart=_yield$commerce$cart$.cart;setCart(cart);case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function handleUpdateCartQty(_x,_x2){return _ref3.apply(this,arguments);};}();var handleRemoveFromCart=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(productId){var _yield$commerce$cart$2,cart;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return commerce.cart.remove(productId);case 2:_yield$commerce$cart$2=_context4.sent;cart=_yield$commerce$cart$2.cart;setCart(cart);case 5:case\"end\":return _context4.stop();}}},_callee4);}));return function handleRemoveFromCart(_x3){return _ref4.apply(this,arguments);};}();var onEmptyCart=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var _yield$commerce$cart$3,cart;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return commerce.cart.empty();case 2:_yield$commerce$cart$3=_context5.sent;cart=_yield$commerce$cart$3.cart;setCart(cart);case 5:case\"end\":return _context5.stop();}}},_callee5);}));return function onEmptyCart(){return _ref5.apply(this,arguments);};}();var refreshCart=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var newCart;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return commerce.cart.refresh();case 2:newCart=_context6.sent;setCart(newCart);case 4:case\"end\":return _context6.stop();}}},_callee6);}));return function refreshCart(){return _ref6.apply(this,arguments);};}();var handleCaptureCheckout=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(checkoutTokenId,newOrder){var incomingOrder;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.prev=0;_context7.next=3;return commerce.checkout.capture(checkoutTokenId,newOrder);case 3:incomingOrder=_context7.sent;setOrder(incomingOrder);refreshCart();_context7.next=11;break;case 8:_context7.prev=8;_context7.t0=_context7[\"catch\"](0);setErrorMessage(_context7.t0.data.error.message);case 11:case\"end\":return _context7.stop();}}},_callee7,null,[[0,8]]);}));return function handleCaptureCheckout(_x4,_x5){return _ref7.apply(this,arguments);};}();useEffect(function(){fetchProducts();fetchCart();},[]);console.log(cart);return/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsx(ScrollToTop,{}),/*#__PURE__*/_jsx(Navbar,{totalItems:cart.total_items}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",exact:true,component:Home}),/*#__PURE__*/_jsx(Route,{path:\"/about\",exact:true,component:About}),/*#__PURE__*/_jsx(Route,{path:\"/music\",exact:true,component:Music}),/*#__PURE__*/_jsx(Route,{path:\"/videos\",exact:true,component:Videos}),/*#__PURE__*/_jsx(Route,{path:\"/shop\",exact:true,component:Shop}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/cart\",children:/*#__PURE__*/_jsx(Cart,{cart:cart,handleUpdateCartQty:handleUpdateCartQty,handleRemoveFromCart:handleRemoveFromCart,handleEmptyCart:onEmptyCart})}),/*#__PURE__*/_jsx(Route,{path:\"/checkout\",exact:true,children:/*#__PURE__*/_jsx(Checkout,{cart:cart,order:order,onCaptureCheckout:handleCaptureCheckout,error:errorMessage})})]}),/*#__PURE__*/_jsx(Footer,{})]});};export default App;","map":{"version":3,"sources":["/Users/CRN/VSCode-workspace/auteurfilm/jahndoe-app/jahndoesite/src/App.js"],"names":["React","useEffect","useState","Navbar","BrowserRouter","Router","Switch","Route","Home","About","Music","Videos","Shop","Cart","Footer","ScrollToTop","commerce","Checkout","App","mobileOpen","setMobileOpen","order","setOrder","errorMessage","setErrorMessage","products","setProducts","cart","setCart","fetchProducts","list","data","fetchCart","retrieve","handleUpdateCartQty","productId","quantity","update","handleRemoveFromCart","remove","onEmptyCart","empty","refreshCart","refresh","newCart","handleCaptureCheckout","checkoutTokenId","newOrder","checkout","capture","incomingOrder","error","message","console","log","total_items"],"mappings":"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","sourcesContent":["import React, {useEffect,useState} from 'react';\nimport './App.css';\nimport Navbar from './Components/Navbar'\nimport {BrowserRouter as Router, Switch, Route } from 'react-router-dom';\nimport Home from './Components/pages/Home'\nimport About from './Components/pages/About'\nimport Music from './Components/pages/Music'\nimport Videos from './Components/pages/Videos'\nimport Shop from './Components/pages/Shop' \nimport Cart from './Components/Cart/Cart';\nimport Footer from './Components/Footer';\nimport ScrollToTop from './Components/ScrollToTop';\nimport { commerce } from './lib/commerce'\nimport Checkout from './Components/CheckoutForm/Checkout/Checkout'\n\n\n\nconst App = () => {\n  \n  const [mobileOpen, setMobileOpen] = React.useState(false);\n  const [order, setOrder] = useState({});\n  const [errorMessage, setErrorMessage] = useState('');\n  const [products, setProducts] = useState([]);\n  const [cart, setCart] = useState({});\n\n\n  const fetchProducts = async () => {\n      const { data } = await commerce.products.list();\n  \n      setProducts(data);\n    };\n\n    const fetchCart = async () => {\n\n      setCart(await commerce.cart.retrieve());\n    };\n\n    \n    const handleUpdateCartQty = async (productId, quantity) => {\n      const { cart } = await commerce.cart.update(productId, {quantity });\n\n      setCart(cart)\n  }\n\n  const handleRemoveFromCart = async (productId) => {\n\n        const { cart } = await commerce.cart.remove(productId);\n        setCart(cart);\n  }\n\n  const onEmptyCart = async () => {\n      const { cart } = await commerce.cart.empty();\n      \n        setCart(cart);\n      \n  }\n  const refreshCart = async () => {\n    const newCart = await commerce.cart.refresh();\n\n    setCart(newCart);\n  };\n\n  const handleCaptureCheckout = async (checkoutTokenId, newOrder) => {\n    try {\n      const incomingOrder = await commerce.checkout.capture(checkoutTokenId, newOrder);\n\n      setOrder(incomingOrder);\n\n      refreshCart();\n    } catch (error) {\n      setErrorMessage(error.data.error.message);\n    }\n  };\n\n\n    useEffect(() => {\n      fetchProducts();\n      fetchCart();\n\n    }, []);\n\n    console.log(cart)\n\n\n\n  return (\n  <Router>\n    <ScrollToTop/>\n    <Navbar totalItems={cart.total_items}/>\n    <Switch>\n      <Route path='/' exact component={Home} />\n      <Route path='/about' exact component={About}/>\n      <Route path='/music' exact component={Music}/>\n      <Route path='/videos' exact component={Videos}/>\n      <Route path='/shop' exact component={Shop}/>\n\n      <Route exact path=\"/cart\">\n        <Cart cart={cart} \n        handleUpdateCartQty = {handleUpdateCartQty}\n        handleRemoveFromCart = {handleRemoveFromCart}\n        handleEmptyCart = {onEmptyCart}\n        />\n        </Route>\n\n        <Route path=\"/checkout\" exact>\n            <Checkout cart={cart} order={order} onCaptureCheckout={handleCaptureCheckout} error={errorMessage} />\n          </Route>\n    </Switch>\n\n    \n\n    <Footer/>\n    \n  </Router>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}